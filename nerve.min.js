
var nerve;(function(d){var h={};var g="root";function f(k){var j=null;if(!k.hasOwnProperty("channel")||!k.hasOwnProperty("callback")||!a(k.callback)){throw Error("A channel and a callback must be specified")}if(!k.hasOwnProperty("scope")){j=null}else{j=k.scope||null}if(!h.hasOwnProperty(k.channel)){h[k.channel]={}}if(!k.hasOwnProperty("route")){k.route=g}if(!h[k.channel].hasOwnProperty(k.route)){h[k.channel][k.route]=[]}if(i(j,h[k.channel][k.route])){return}h[k.channel][k.route].push({caller:j,callback:k.callback})}d.on=f;function c(m){if(!m.hasOwnProperty("channel")){throw Error("A channel must be specified")}if(!m.hasOwnProperty("route")){m.route=g}if(!h.hasOwnProperty(m.channel)||!h[m.channel].hasOwnProperty(m.route)){return}if(!m.hasOwnProperty("context")){m.context=null}var l=h[m.channel][m.route],k=0,j=l.length;for(;k<j;k++){(function(p,o,n){var q=setTimeout(function(){try{h[p][o][n].callback.call(h[p][o][n].caller,m.context);clearTimeout(q)}catch(r){}})})(m.channel,m.route,k)}}d.send=c;function b(l){var q=l.channel;var o=l.route||g;var k=l.scope;if(q&&!o&&!k&&h[q]){delete h[q];return}if(q&&o&&!k&&h[q]&&h[q].hasOwnProperty(o)){delete h[q][o];return}if(q&&o&&k&&h[q]&&h[q].hasOwnProperty(o)){e(h[q][o],k);return}if(q&&!o&&k&&h[q]){for(var j in h[q]){if(h[q].hasOwnProperty(j)){e(h[q][j],k)}}return}if(!q&&o&&!k){for(var q in h){if(q.hasOwnProperty(o)){delete q[o];return}}}if(!q&&o&&k){for(var q in h){if(q.hasOwnProperty(o)){e(q[o],k)}}}if(!q&&!o&&k){for(var p in h){q=h[p];for(var o in q){if(q.hasOwnProperty(o)){e(q[o],k)}}}return}}d.off=b;function e(m,l){var k=0,j=m.length;for(;k<j;k++){if(m[k]&&m[k].caller===l){delete m[k];k--;continue}}}function i(l,m){if(!m){return null}var k=0,j=m.length;for(;k<j;k++){console.log(m[k]);if(m[k].caller===l){return m[k]}}return null}function a(j){var k={};return j&&k.toString.call(j)==="[object Function]"}if(module){module.exports=d}})(nerve||(nerve={}));