var nerve;
(function(e){function h(a,b){for(var c=0,d=a.length;c<d;c++)a[c]&&a[c].caller===b&&(a.splice(c,1),c--)}var d={};e.on=function(a){var b=null;if(!(b=!a.hasOwnProperty("channel"))&&!(b=!a.hasOwnProperty("callback")))var b=a.callback,c={},b=!(b&&"[object Function]"===c.toString.call(b));if(b)throw Error("A channel and a callback must be specified");b=a.hasOwnProperty("scope")?a.scope||null:null;d.hasOwnProperty(a.channel)||(d[a.channel]={});a.hasOwnProperty("route")||(a.route="root");d[a.channel].hasOwnProperty(a.route)||(d[a.channel][a.route]=
[]);a:{var c=b,k=a.callback,g=d[a.channel][a.route];if(g)for(var f=0,e=g.length;f<e;f++)if(console.log(g[f]),g[f].caller===c&&g[f].callback===k){c=g[f];break a}c=null}c||d[a.channel][a.route].push({caller:b,callback:a.callback})};e.send=function(a){if(!a.hasOwnProperty("channel"))throw Error("A channel must be specified");a.hasOwnProperty("route")||(a.route="root");if(d.hasOwnProperty(a.channel)&&d[a.channel].hasOwnProperty(a.route)){a.hasOwnProperty("context")||(a.context=null);for(var b=0,c=d[a.channel][a.route].length;b<
c;b++)(function(b,c,f){var e=setTimeout(function(){try{d[b][c][f].callback.call(d[b][c][f].caller,a.context),clearTimeout(e)}catch(h){}})})(a.channel,a.route,b)}};e.off=function(a){var b=a.channel,c=a.route;a=a.scope;if(b&&!c&&!a&&d[b])delete d[b];else if(b&&c&&!a&&d[b]&&d[b].hasOwnProperty(c))delete d[b][c];else if(b&&c&&a&&d[b]&&d[b].hasOwnProperty(c))h(d[b][c],a);else if(b&&!c&&a&&d[b])for(var e in d[b])d[b].hasOwnProperty(e)&&h(d[b][e],a);else if(!b&&c&&!a)for(b in d)d[b].hasOwnProperty(c)&&delete d[b][c];
else if(!b&&c&&a)for(b in d)d[b].hasOwnProperty(c)&&h(d[b][c],a);else if(!b&&!c&&a)for(var g in d)for(c in b=d[g],b)b.hasOwnProperty(c)&&h(b[c],a)};"object"===typeof module&&(module.exports=e)})(nerve||(nerve={}));
