var nerve;
(function(h){function l(a,b,d){for(var f=0,e=c[a][b].length;f<e;f++)try{c[a][b][f].callback.call(c[a][b][f].caller,d)}catch(g){}}function k(a,b){for(var d=0,c=a.length;d<c;d++)a[d]&&a[d].caller===b&&(a.splice(d,1),d--)}var c={};h.on=function(a){var b=null;if(!(b=!a.hasOwnProperty("channel"))&&!(b=!a.hasOwnProperty("callback")))var b=a.callback,d={},b=!(b&&"[object Function]"===d.toString.call(b));if(b)throw Error("A channel and a callback must be specified");b=a.hasOwnProperty("scope")?a.scope||null:
null;c.hasOwnProperty(a.channel)||(c[a.channel]={});a.hasOwnProperty("route")||(a.route="root");c[a.channel].hasOwnProperty(a.route)||(c[a.channel][a.route]=[]);a:{var d=b,f=a.callback,e=c[a.channel][a.route];if(e)for(var g=0,h=e.length;g<h;g++)if(console.log(e[g]),e[g].caller===d&&e[g].callback===f){d=e[g];break a}d=null}d||c[a.channel][a.route].push({caller:b,callback:a.callback})};h.send=function(a){if(!a.hasOwnProperty("channel"))throw Error("A channel must be specified");a.hasOwnProperty("route")||
(a.route="root");a.hasOwnProperty("context")||(a.context=null);c.hasOwnProperty(a.channel)&&c[a.channel].hasOwnProperty(a.route)&&l(a.channel,a.route,a.context);c.hasOwnProperty(a.channel)&&c[a.channel].hasOwnProperty("root")&&l(a.channel,"root",a.context)};h.off=function(a){var b=a.channel,d=a.route;a=a.scope;if(b&&!d&&!a&&c[b])delete c[b];else if(b&&d&&!a&&c[b]&&c[b].hasOwnProperty(d))delete c[b][d];else if(b&&d&&a&&c[b]&&c[b].hasOwnProperty(d))k(c[b][d],a);else if(b&&!d&&a&&c[b])for(var f in c[b])c[b].hasOwnProperty(f)&&
k(c[b][f],a);else if(!b&&d&&!a)for(b in c)c[b].hasOwnProperty(d)&&delete c[b][d];else if(!b&&d&&a)for(b in c)c[b].hasOwnProperty(d)&&k(c[b][d],a);else if(!b&&!d&&a)for(var e in c)for(d in b=c[e],b)b.hasOwnProperty(d)&&k(b[d],a)};"object"===typeof module&&(module.exports=h)})(nerve||(nerve={}));
